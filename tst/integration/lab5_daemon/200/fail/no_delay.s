.globl solution
# run_flags: --time-scale=10
solution:
        addi    sp,sp,-48
        sd      s4,0(sp)
        lui     s4,%hi(x)
        sd      s2,16(sp)
        sd      s3,8(sp)
        sd      ra,40(sp)
        sd      s0,32(sp)
        sd      s1,24(sp)
        addi    s2,s4,%lo(x)
        li      s3,8
.L3:
        mv      s1,s2
        li      s0,0
.L2:
        mv      a0,s0
        call    get_button_status
        sb      a0,0(s1)
        addiw   s0,s0,1
        addi    s1,s1,1
        bne     s0,s3,.L2
        lbu     a5,2(s2)
        lbu     a1,%lo(x)(s4)
        li      a0,0
        not     a5,a5
        and     a1,a5,a1
        call    set_led_status
        lbu     a4,1(s2)
        lbu     a5,5(s2)
        lbu     a1,7(s2)
        li      a0,1
        or      a5,a5,a4
        or      a1,a5,a1
        call    set_led_status
        lbu     a5,4(s2)
        lbu     a4,3(s2)
        lbu     a1,5(s2)
        seqz    a5,a5
        or      a5,a5,a4
        and     a1,a5,a1
        li      a0,2
        call    set_led_status
        lbu     a4,2(s2)
        lbu     a5,6(s2)
        lbu     a1,4(s2)
        li      a0,3
        or      a5,a5,a4
        xor     a1,a5,a1
        call    set_led_status
        lbu     a4,3(s2)
        lbu     a5,1(s2)
        lbu     a1,4(s2)
        li      a0,4
        and     a5,a5,a4
        xor     a1,a5,a1
        call    set_led_status
        lbu     a4,%lo(x)(s4)
        lbu     a5,5(s2)
        lbu     a1,6(s2)
        li      a0,5
        and     a5,a5,a4
        and     a1,a5,a1
        call    set_led_status
        lbu     a4,7(s2)
        lbu     a5,5(s2)
        lbu     a1,2(s2)
        li      a0,6
        or      a5,a5,a4
        or      a1,a5,a1
        call    set_led_status
        lbu     a5,%lo(x)(s4)
        lbu     a1,2(s2)
        li      a0,7
        seqz    a5,a5
        and     a1,a5,a1
        call    set_led_status
        #call    delay
        j       .L3
.data
x:
        .zero 8
