.globl solution
# run_flags: --time-scale=10
solution:
        addi    sp,sp,-112
        sd      s5,56(sp)
        sd      s6,48(sp)
        sd      ra,104(sp)
        sd      s0,96(sp)
        sd      s1,88(sp)
        sd      s2,80(sp)
        sd      s3,72(sp)
        sd      s4,64(sp)
        sd      s7,40(sp)
        sd      s8,32(sp)
        sd      s9,24(sp)
        addi    s5,sp,8
        li      s6,8
.L3:
        li      s0,0
.L2:
        sext.w  a0,s0
        call    get_button_status
        add     a5,s5,s0
        sb      a0,0(a5)
        addi    s0,s0,1
        bne     s0,s6,.L2
        lbu     s2,10(sp)
        lbu     s1,8(sp)
        li      a0,0
        not     a1,s2
        and     a1,s1,a1
        call    set_led_status
        lbu     s0,13(sp)
        lbu     s3,9(sp)
        lbu     s7,15(sp)
        li      a0,1
        or      a1,s0,s3
        or      a1,s7,a1
        call    set_led_status
        lbu     s4,12(sp)
        lbu     s9,11(sp)
        li      a0,2
        negw    a1,s4
        or      a1,a1,s9
        and     a1,a1,s0
        call    set_led_status
        lbu     s8,14(sp)
        li      a0,3
        or      a1,s2,s8
        xor     a1,s4,a1
        call    set_led_status
        and     a1,s3,s9
        xor     a1,s4,a1
        li      a0,5
        call    set_led_status
        and     a1,s1,s0
        and     a1,s8,a1
        li      a0,4
        call    set_led_status
        or      a1,s2,s0
        or      a1,s7,a1
        li      a0,6
        call    set_led_status
        negw    a1,s1
        and     a1,a1,s2
        li      a0,7
        call    set_led_status
        call    delay
        j       .L3
